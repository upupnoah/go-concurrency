# 死锁问题

## Case

- 复制锁
- 递归锁
- 自旋锁
- 饥饿锁
- 死锁
- 活锁
- 重入锁
- 非重入锁
- 可重入锁
- 不可重入锁

## 常见问题

1. 复制锁
2. 忘记解锁
3. 重复上锁
4. 循环等待

## 检查死锁的工具

1. go vet
2. go-deadlock
3. go-tools

## Note

并发程序最难跟踪调试的就是很难重现，因为并发问题不是按照我们指定的顺序执行的，由于计算机调度的问题和事件触发的时机不同，死锁的 Bug 可能会在极端的情况下出现。通过搜索日志、查看日志，我们能够知道程序有异常了，比如某个流程一直没有结束。这个时候，可以通过 Go pprof 工具分析，它提供了一个 block profiler 监控阻塞的 goroutine。除此之外，我们还可以查看全部的 goroutine 的堆栈信息，通过它，你可以查看阻塞的 goroutine 究竟阻塞在哪一行哪一个对象上了
